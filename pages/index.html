---
permalink: /
layout: default
---

<button class="mobile-nav">&#x2630;</button>

<div id="side-menu">
	<ul class="category">
		<li><a style="font-weight:500;" href="">SHOW ALL</a></li>
		
		<br><br>
		
		<li><a style="font-weight:500;" href="">RANDOM</a></li>
		
		<br><br>
		
		<li style="color:hsl(192, 96%, 45%); font-weight:500;  padding-bottom:0.25em;">FILTER BY LEVEL</li>	
		<li style="	font-weight:500;"><a href="">Professional Creatives</a></li>	
		<li style="	font-weight:500;"><a href="">Students</a></li>	
		<li style="	font-weight:500;"><a href="">Hobbyists</a></li>
		
		<br><br>
		
		<li style="color:hsl(192, 96%, 45%); font-weight:500; padding-bottom:0.25em;">FILTER BY PROFESSION</li>	
		<li><a href="">Fine Artists</a></li>			
		<li><a href="">Illustrators</a></li>			
		<li><a href="">Concept Artists</a></li>			
		<li><a href="">3D Artists</a></li>			
		<li><a href="">Photographers</a></li>			
		<li><a href="">Designers</a></li>			
		<li><a href="">Comics Artists</a></li>			
		<li><a href="">Cartoonists</a></li>			
		<li><a href="">Animators</a></li>			
		<li><a href="">Storyboard Artists</a></li>
		<li><a href="">Vis Dev Artists</a></li>
		<li><a href="">Background Artists</a></li>
		<li><a href="">Film Makers</a></li>
		<li><a href="">Character Designers</a></li>
		<li><a href="">3D Environment Artists</a></li>
		<li><a href="">3D Character Artists</a></li>
		<li><a href="">Game Artists</a></li>
		<li><a href="">Crafts Artists</a></li>
		
		<br><br><br>
		
		<li style="	font-weight:500;"><a href="{{ site.baseurl }}/about">ABOUT</a></li>
	</ul>
	
</div>
		
<div id="main-content">
	<a href="{{ site.baseurl }}/"><img class="peeps-lettering" src="img/visiblepeeps.png"></a>

	 	<h2>Women, non-binary and trans creators on Twitter<br> <a href="https://twitter.com/hashtag/VisibleWomen?src=hash">#VisibleWomen</a> Â· <a href="https://twitter.com/hashtag/VisibleNB?src=hash">#VisibleNB</a></h2>
	
	<div>
		<a href="{{site.baseurl}}/submit" class="submit-button">SUBMIT TWEET</a>
	</div>
	
	<div id="app">
		<div class="module-grid" ref="tweetContainer"></div>
		
		<div v-if="!finishedLoading">
			<br><br><br>
			Loading...
			<br><br><br>
		</div>
	</div>
</div>

<script>
	window.onload = function(){
		Array.prototype.shuffle = function(){
			let out = [];
			let clone = this.slice();
			
			while (clone.length > 0){
				let index = Math.floor(Math.random() * clone.length);
				let item = clone.splice(index, 1)[0];
				out.push(item);
			}
			
			return out;
		};
		
		firebase.initializeApp({
			apiKey: "AIzaSyDahkALUP2HDnuLqiXOt-ScOPobhqFoW84",
			authDomain: "visiblewomen-net.firebaseapp.com",
			databaseURL: "https://visiblewomen-net.firebaseio.com",
			projectId: "visiblewomen-net",
			storageBucket: "visiblewomen-net.appspot.com",
			messagingSenderId: "532732660193"
		});
		
		let app = new Vue({
			el: "#app",
			
			delimiters: ["<%", "%>"],
			
			data: {
				tweets: [],
				index: 0,
				finishedLoading: false,
				canLoadMoreTweets: true,
			},
			
			methods: {
				loadMoreTweets: function(){
					let self = this;
					if (!self.canLoadMoreTweets) return;
					
					self.tweets.slice(self.index, self.index + 10).forEach(async function(url){
						let blockquote = document.createElement("blockquote");
						blockquote.className += "twitter-tweet";
						
						let a = document.createElement("a");
						a.href = url;
						
						let script = document.createElement("script");
						script.src = "https://platform.twitter.com/widgets.js";
						
						blockquote.appendChild(a);
						self.$refs.tweetContainer.appendChild(blockquote);
						self.$refs.tweetContainer.appendChild(script);
					});
					
					self.index += 10;
				},
			},
			
			mounted: function(){
				let self = this;
				let db = firebase.database();
				let ref = db.ref("/approvedTweets");
				
				ref.once("value").then(function(snapshot){
					self.finishedLoading = true;
					let tweets = snapshot.val();
					if (!tweets) return;
					
					self.tweets = Object.keys(tweets).map(function(key){
						return tweets[key];
					});
					
					self.tweets = self.tweets.shuffle();
					
					setTimeout(self.loadMoreTweets, 0);
				}).catch(function(error){
					console.log(error);
				});
				
				window.addEventListener("scroll", function(event){
					let percent = window.scrollY / document.body.scrollHeight;
					
					if (percent > 0.75 && self.index < self.tweets.length){
						self.loadMoreTweets();
						self.canLoadMoreTweets = false;
						self.finishedLoading = false;
						
						setTimeout(function(){
							self.canLoadMoreTweets = true;
							self.finishedLoading = true;
						}, 3000);
					}
				});
			},
		});
		
		document.getElementById("app").style.display = "block";
	};
</script>
